"use strict";(self.webpackChunktinder_for_movies=self.webpackChunktinder_for_movies||[]).push([[414],{414:(n,e,t)=>{t.r(e),t.d(e,{default:()=>mn});var i,o,r,s,a,c,d,l=t(43),p=t(528),x=t(464);const h=x.Ay.div(i||(i=(0,p.A)(["\n    width: 100vw;\n    height: 100vh;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    background-color: #1f1f1f;\n    color: #ffffff;\n"]))),f=x.Ay.div(o||(o=(0,p.A)(["\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n    padding-bottom: 70px;\n"]))),u=x.Ay.h1(r||(r=(0,p.A)(["\n    font-size: ",";\n"])),(n=>{let{$isMobile:e}=n;return e?"22px":"30px"})),m=x.Ay.div(s||(s=(0,p.A)(["\n    padding: 20px 20px 0 20px;\n"]))),g=x.Ay.div(a||(a=(0,p.A)(["\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n    gap: 20px;\n\n    @media (min-width: 1024px) {\n        grid-template-columns: repeat(4, 1fr);\n    }\n\n    @media (min-width: 768px) and (max-width: 1023px) {\n        grid-template-columns: repeat(3, 1fr);\n    }\n\n    @media (max-width: 767px) {\n        grid-template-columns: repeat(1, 1fr);\n    }\n"]))),j=(0,x.i7)(c||(c=(0,p.A)(["\n    from {\n        transform: rotate(0deg);\n    }\n    to {\n        transform: rotate(360deg);\n    }\n"]))),y=x.Ay.div(d||(d=(0,p.A)(["\n    border: 4px solid rgba(255, 255, 255, 0.3);\n    border-top: 4px solid #fff;\n    border-radius: 50%;\n    width: 50px;\n    height: 50px;\n    animation: "," 1s linear infinite;\n    margin: 75px auto;\n"])),j);var v,A;const w=x.Ay.button(v||(v=(0,p.A)(["\n    border: none;\n    background-color: transparent;\n    &:hover {\n        cursor: pointer;\n        transform: scale(1.05);\n        transition: transform 0.2s ease-in-out;\n    }\n"]))),b=x.Ay.div(A||(A=(0,p.A)(["\n    position: absolute;\n    bottom: 30%;\n    right: 10%;\n    transform: translateX(-50%);\n    background-color: #333;\n    color: #fff;\n    padding: 6px 12px;\n    border-radius: 5px;\n    font-size: 14px;\n    white-space: nowrap;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n    z-index: 999;\n    opacity: 0.9;\n"])));var k=t(579);const C=n=>{let{content:e,tooltip:t,onClick:i,style:o,ariaLabel:r}=n;const[s,a]=(0,l.useState)(!1);return(0,k.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,k.jsx)(w,{onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),onClick:i,style:o,"aria-label":r,children:e}),s&&t&&(0,k.jsx)(b,{children:t})]})};var M,R,S,$,z,E,D,L,T;const H=x.Ay.div(M||(M=(0,p.A)(["\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    transition: transform 0.2s, box-shadow 0.2s;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    border: 1px solid #3a3a3a;\n    border-radius: 10px;\n    background-color: #4a4a4a;\n\n    ","\n\n    img {\n        width: 100%;\n        max-width: 100%;\n        height: 200px;\n        object-fit: contain;\n        border-radius: 8px 8px 0 0;\n        background-color: #000;\n\n        ","\n    }\n\n    h3,\n    p {\n        margin: 10px 0;\n        color: #ffffff;\n    }\n"])),(n=>{let{$isMobile:e}=n;return!e&&(0,x.AH)(R||(R=(0,p.A)(["\n            &:hover {\n                cursor: pointer;\n            }\n        "])))}),(n=>{let{$isMobile:e}=n;return e&&(0,x.AH)(S||(S=(0,p.A)(["\n                @media (min-height: 800px) {\n                    height: 400px;\n                }\n            "])))})),X=x.Ay.div($||($=(0,p.A)(["\n    height: 80vh;\n    display: flex;\n    overflow: hidden;\n    padding: 10px;\n"]))),I=x.Ay.div(z||(z=(0,p.A)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    pointer-events: none;\n    transition: opacity 0.3s ease, background 0.3s ease;\n    opacity: ",";\n    background: ",";\n"])),(n=>{let{$imgClicked:e,$swipeDistance:t}=n;return e||t?1:0}),(n=>{let{$imgClicked:e,$swipeDirection:t}=n;return e?"rgba(0, 0, 0, 0.7)":"right"===t?"rgba(255, 0, 0, 0.4)":"left"===t?"rgba(0, 255, 0, 0.4)":"transparent"})),P=x.Ay.div(E||(E=(0,p.A)(["\n    font-size: 1.5rem;\n    font-weight: bold;\n    color: white;\n    text-transform: uppercase;\n    display: flex;\n    align-items: center;\n    transition: transform 0.2s ease;\n    transform: ",";\n"])),(n=>{let{$swipeDistance:e}=n;return"translateX(".concat(.3*e,"px)")})),W=x.Ay.span(D||(D=(0,p.A)(["\n    font-size: 2rem;\n    margin: 0 10px;\n"]))),_=x.Ay.div(L||(L=(0,p.A)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    padding: 0 30px;\n"]))),F=x.Ay.div(T||(T=(0,p.A)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    gap: 2px;\n    padding: 10px 20px;\n"])));var N,O,Q=t(686);const U=x.Ay.div(N||(N=(0,p.A)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 10px;\n"]))),V=x.Ay.div(O||(O=(0,p.A)(["\n    padding: 10px;\n"]))),G=n=>{let{movie:e,onAccept:t,onReject:i,type:o="all",isMobile:r=!1,setImgClicked:s,distanceChange:a}=n;const c=()=>{s(!0)},d=()=>{s(!1)};return(0,l.useEffect)((()=>{a&&s(!1)}),[a]),(0,k.jsxs)(H,{$isMobile:r,children:[(0,k.jsx)("img",{src:e.imageURL,alt:e.title,onMouseDown:r?c:null,onMouseUp:r?d:null,onTouchStart:r?c:null,onTouchEnd:r?d:null,loading:"lazy",onError:n=>{n.target.src="",n.target.alt="No Image Available"}}),(0,k.jsxs)(V,{children:[(0,k.jsx)("h3",{children:e.title}),(0,k.jsx)("p",{children:e.summary}),(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"Rating:"})," ",e.rating]})]}),"accepted"!==o&&(0,k.jsxs)(U,{children:[(0,k.jsx)(C,{content:(0,k.jsx)(Q.wmH,{size:r?50:35,color:"green"}),ariaLabel:"Accept",onClick:()=>t(e.id)}),(0,k.jsx)(C,{content:(0,k.jsx)(Q.ipV,{size:r?50:35,color:"red"}),onClick:()=>i(e.id),ariaLabel:"Reject"})]})]})};var Y,q=t(59);const B=x.Ay.div(Y||(Y=(0,p.A)(["\n    height: 100;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]))),J=n=>{let{onLoadMore:e}=n;const{ref:t,inView:i}=(0,q.Wx)({threshold:.5});return(0,l.useEffect)((()=>{i&&e()}),[i,e]),(0,k.jsx)(B,{ref:t,children:(0,k.jsx)(y,{"data-testid":"loader"})})},K=n=>{let{movies:e,onAccept:t,onReject:i,type:o}=n;const[r,s]=(0,l.useState)(8);return(0,k.jsxs)(g,{children:[e.slice(0,r).map((n=>(0,k.jsx)(G,{"data-testid":"movie-item",movie:n,onAccept:t,onReject:i,type:o},n.id))),r<e.length&&(0,k.jsx)(J,{onLoadMore:()=>{setTimeout((()=>{s((n=>n+8))}),1e3)},"data-testid":"lazy-loader"})]})};var Z,nn,en,tn,on=t(394);const rn=x.Ay.div(Z||(Z=(0,p.A)(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    background: rgba(0, 0, 0, 0.4);\n    backdrop-filter: blur(8px);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 1000;\n"]))),sn=x.Ay.div(nn||(nn=(0,p.A)(["\n    background-color: #6c6c6c;\n    color: #ffffff;\n    border: 1px solid #3a3a3a;\n    border-radius: 10px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    padding: 0;\n    width: 80%;\n    height: 80%;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    @media (max-width: 768px) {\n        width: 100vw;\n        height: 100vh;\n        border-radius: 0;\n    }\n"]))),an=x.Ay.div(en||(en=(0,p.A)(["\n    padding: 20px 20px 0 20px;\n\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    position: sticky;\n    top: 0;\n    z-index: 10;\n"]))),cn=x.Ay.div(tn||(tn=(0,p.A)(["\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n"]))),dn=n=>{let{show:e,onClose:t,acceptedMovies:i}=n;const o=(0,l.useRef)(null);return e?(0,k.jsx)(rn,{onClick:n=>{o.current&&!o.current.contains(n.target)&&t()},"data-testid":"backdrop",children:(0,k.jsxs)(sn,{ref:o,role:"dialog","aria-modal":"true",children:[(0,k.jsxs)(an,{children:[(0,k.jsx)("h2",{children:"Accepted Movies"}),(0,k.jsx)(C,{content:(0,k.jsx)(on.Yfd,{size:30,color:"white"}),onClick:t})]}),(0,k.jsx)(cn,{children:i&&i.length>0?(0,k.jsx)(K,{movies:i,type:"accepted"}):(0,k.jsx)("p",{children:"Not any accepted films here..."})})]})}):null};var ln=t(379),pn=t(109),xn=t(423);const hn=n=>{var e;let{movies:t,onReject:i,onAccept:o}=n;const[r,s]=(0,l.useState)(0),[a,c]=(0,l.useState)(null),[d,p]=(0,l.useState)(0),[x,h]=(0,l.useState)(!1);(0,l.useEffect)((()=>{r>=t.length&&t.length>0&&s(0)}),[t]);const f=()=>{c(null),p(0)},u=(0,pn.uh)({onSwiping:n=>{p(n.deltaX),n.deltaX>0?c("right"):n.deltaX<0&&c("left")},onSwiped:()=>{const n=t[r];Math.abs(d)>150&&(d>0?i(n.id):d<0&&o(n.id),s((n=>{const e=n+1;return e<t.length?e:n}))),f()},preventScrollOnSwipe:!0,trackTouch:!0,trackMouse:!0});return r>=t.length?(0,k.jsx)("p",{style:{padding:"30px"},children:"No more recommendations"}):(0,k.jsxs)(X,(0,ln.A)((0,ln.A)({},u),{},{$swipeDistance:d,"data-testid":"swiper",children:[(0,k.jsxs)(I,{$swipeDirection:a,$swipeDistance:d,$imgClicked:x,children:["right"===a&&(0,k.jsxs)(P,{$swipeDistance:d,children:[(0,k.jsx)("p",{children:"Reject Recommendation"}),(0,k.jsx)(W,{children:(0,k.jsx)(xn.OQo,{})})]}),"left"===a&&(0,k.jsxs)(P,{$swipeDistance:d,children:[(0,k.jsx)(W,{children:(0,k.jsx)(xn.m6W,{})}),(0,k.jsx)("p",{children:"Accept Recommendation"})]}),x&&(0,k.jsx)(P,{children:(0,k.jsxs)(_,{children:[(0,k.jsxs)(F,{children:[(0,k.jsx)(W,{children:(0,k.jsx)(xn.m6W,{})}),(0,k.jsx)("p",{children:"Accept"})]}),(0,k.jsxs)(F,{children:[(0,k.jsx)("p",{children:"Reject"}),(0,k.jsx)(W,{children:(0,k.jsx)(xn.OQo,{})})]})]})})]}),(0,k.jsx)(G,{movie:t[r],onAccept:o,onReject:i,setImgClicked:h,distanceChange:0!==d,isMobile:!0},null===(e=t[r])||void 0===e?void 0:e.id)]}))};var fn=t(722);const un=async function(n){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const t={method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",url:"".concat("/api").concat(n),data:e};try{return(await(0,fn.A)(t)).data}catch(i){throw console.error("API Error:",i),i}},mn=()=>{const[n,e]=(0,l.useState)([]),[t,i]=(0,l.useState)([]),[o,r]=(0,l.useState)(!0),[s,a]=(0,l.useState)(!1);(0,l.useEffect)((()=>{(async()=>{try{const n=await un("/recommendations");e(n)}catch(n){console.error("Failed to load movies.")}finally{r(!1)}})()}),[]),(0,l.useEffect)((()=>{(async()=>{try{const n=await un("/recommendations/accepted");i(n)}catch(n){console.error("Failed load accepted recommendations:",n)}})()}),[]);const c=async n=>{try{const t=await un("/recommendations/".concat(n),"PATCH",{status:"accepted"});e((n=>n.filter((n=>n.id!==t.id)))),i((n=>[...n,t]))}catch(t){console.error("Error during accept action.")}},d=async n=>{try{const t=await un("/recommendations/".concat(n),"PATCH",{status:"rejected"});e((n=>n.filter((n=>n.id!==t.id))))}catch(t){console.error("Error during reject action.")}},p=window.innerWidth<=768;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(h,{children:[(0,k.jsx)(m,{children:(0,k.jsxs)(U,{children:[(0,k.jsx)(u,{$isMobile:p,children:"Movie Recommendations"}),(0,k.jsx)(C,{tooltip:"Show accepted movies list",content:(0,k.jsx)(on.yPD,{size:30,color:"white"}),onClick:()=>{a(!0)}})]})}),p?(0,k.jsx)(hn,{movies:n,onReject:d,onAccept:c}):(0,k.jsx)(f,{children:o?(0,k.jsx)("p",{children:"Loading movies..."}):(0,k.jsx)(K,{movies:n,onAccept:c,onReject:d})})]}),(0,k.jsx)(dn,{show:s,onClose:()=>{a(!1)},acceptedMovies:t})]})}}}]);
//# sourceMappingURL=414.692d0e7d.chunk.js.map